- model_name = controller_name.singularize
- model_klass = model_name.camelcase.constantize
%div.borderBottomLeads
  .title_tools
    #buttons
      = view_buttons
    .create_asset{ data: { target: "#popupContainer#{model_name.camelcase}" } }
      = link_to_inline("create_#{model_name}".to_sym, send("new_#{model_name}_path"), {text: t("create_#{model_name}".to_sym), class: 'btn-sm btn btn-outline-primary create-button'})
  %div
    %input#query.newCustomButton{ placeholder: "Search", type: "text", data: { type: controller_name.singularize } }

:javascript
  var searchTimeout;

  $('#query').on('keydown', function(event) {
    $el = $(event.target);
    if (searchTimeout) clearTimeout(searchTimeout);
    searchTimeout = setTimeout(function () { crm.search($el.val(), '#{controller_name}'); }, 500);
  });
